{% extends "dashboard.html" %}

{% block head %}
{{ super()}}
<script>
    function toggleForm() {
        const form = document.getElementById("flightForm");
        form.style.display = (form.style.display === "block") ? "none" : "block";
    }
</script>

<style>
  .add-flight-button {
      position: fixed;
    background-color: rgba(50, 150, 255, 1);
    color: white;
    border: none;
      bottom: 1px;
      right: 30px;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.2s;
    margin-bottom: 15px;
  }

  .add-flight-button:hover {
    background-color: rgba(30, 130, 230, 1);
  }

  .form-box {
      position: fixed;
      display: none;
      bottom: 80px;
      right: 30px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      color: black;
  }

  .form-box input {
    width: 100%;
    margin-bottom: 8px;
  }

  .btn-edit, .btn-delete {
      text-decoration: none;
      float: right;
      padding: 4px 8px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.85rem;
  }

  .btn-edit {
      background-color: rgba(200, 150, 50, 0.8);
      color: white;
  }

  .btn-delete {
      background-color: rgba(255, 50, 50, 0.8);
      color: white;
  }
</style>
{% endblock %}


{% block navADM %}
<li class="nav-item"><a class="nav-link" href="/settings">settings</a></li>
{% endblock %}


{% block flights_container %}
    {% for flight in flights.values() %}
    <div class="flight">
        <strong>{{ flight.source }}</strong> → <strong>{{ flight.destination }}</strong><br>
        Horário de partida: {{ flight.entryTime }}<br>
        Horário de chegada: {{ flight.exitTime }}<br>
        Preço: ${{ flight.price }}
        <div class="flight-buttons">
            <a class="btn-edit" href="/settings/flight?id={{ flight.id }}">Editar</a>
            <a class="btn-delete" href="/settings/delete_flight?id={{ flight.id }}">Excluir</a>
        </div>
    </div>
    {% endfor %}
{% endblock %}

{% block content %}
<button class="add-flight-button" onclick="toggleForm()">+ Add Flight</button>


<div id="flightForm" class="form-box">
    <form method="POST" action="{{ url_for('dashboardADM.addFlight') }}">
        <label>Source:</label>
        <input type="text" name="source" required><br>

        <label>Destination:</label>
        <input type="text" name="destination" required><br>

        <label>Entry Time:</label>
        <input type="time" name="entryTime" required><br>

        <label>Exit Time:</label>
        <input type="time" name="exitTime" required><br>

        <label>Price:</label>
        <input type="number" name="price" step="0.01" required><br>

        <button type="submit">Add</button>
    </form>
</div>

{{super()}}
{% endblock %}
